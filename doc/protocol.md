# Protocol

## Model

```
type Packet struct {
	ComputerId   string         `json:"computerid"`
	PacketId     string         `json:"packetid"`
	PacketType   string         `json:"packetType"`
	Arguments    PacketArgument `json:"arguments"`
	Response     PacketResponse `json:"response"`
	DownstreamId string         `json:"downstreamId"`
}
```

* `ComputerId`: A unique ID, generated at each start of client.exe
* `PacketId`: A random packet ID, generated by the packet-creater (mostly server, sometimes client)
* `PacketType`: What command to execute, how `Arguments` and `Response` should be interpreted
* `Arguments`: Arguments for the command
* `Response`: Response to the command
* `DownstreamId`: On which downstream the command should be executed (default is "client")



## Packet Argument/Response definition

General:
* Response: 
  * "error": Any Go err.Error() information when handling the packet

### Ping 

* Arguments: None 
* Response: 
  * "response" = "ping answer"

### Test

* Arguments: None 
* Response: 
  * "response" = "test answer"

### Exec 
 
* Arguments: 
  * "executable": Path to executable 
  * "paramX": params for executable, where 0 <= X < 9

* Response:
  * "stdout"
  * "stderr"

### Filedownload

* Arguments: 
  * "remoteurl": URL to download
  * "destination": Path/filename of where to download

* Response: 
  * "response": a string showing success, or not

### Fileupload

* Arguments:
  * "remoteurl": Where to upload
  * "source": Which file/path to upload

* Response: 
  * "response": HTTP status of upload

### iOpen 

* Arguments: 
  * "force": Optional

* Response: 
  * "stdout"
  * "stderr"

### iIssue 

* Arguments: 
  * "commandline": Stuff to write to the shell (usually a command line)

* Response: 
  * "stdout"
  * "stderr"
